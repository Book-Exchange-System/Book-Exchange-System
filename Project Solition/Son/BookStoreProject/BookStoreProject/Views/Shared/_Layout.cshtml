@{
    User user = BookStoreProject.Controllers.LoginController.currentUser;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Book Store</title>
    <link href="~/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />

    <link rel="icon" href="~/website.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
          integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="~/slick/slick.css" rel="stylesheet" />
    <link href="~/slick/slick-theme.css" rel="stylesheet" />
    <link href="~/css/site.css" rel="stylesheet" />
</head>
<body class="vsc-initialized">
    <div class="wrapper">

        @if (user != null && user.UserType != null && user.UserType.Equals("a"))
        {

            <!--Sidebar Start -->
            <div id="sidebar">
                <div class="sidebar-logo d-flex justify-content-between">
                    <!--Sidebar Logo and Title -->
                    <a href="~/" class="header-logo">   
                        <i class="fas fa-book-reader fa-2x"></i>
                        <div class="mt-2 ml-2 logo-title">
                            <span class="text-primary text-uppercase">Book Store</span>
                        </div>
                    </a>
                    <!--Sidebar Wrapper Menu Button -->
                    <div class="menu-bt-sidebar">
                        <div class="menu-bt align-self-center">
                            <div class="wrapper-menu">
                                <div class="main-circle">
                                    <i class="fas fa-bars"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Sidebar Nav-->
                <div id="sidebar-content" data-scrollbar="true" tabindex="-1" style="overflow: hidden; outline: none;">
                    <nav class="sidebar-menu">
                        <ul class="sidebar-menu">
                            <li class="sidebar-item">
                                <a href="~/"><i class="fas fa-home"></i>Home Page</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="#" class="sub-menu" id="sub-menu-1">
                                    <i class="fas fa-address-book"></i>User
                                </a>
                                <ul class="sub-menu-items" id="sub-menu-items-1">
                                    <li class="sidebar-sub-item"> <a href="~/admin/users_table"><i class="fas fa-address-book"></i>Show Users</a></li>
                                </ul>
                            </li>
                            <li class="sidebar-item">
                                <a href="#" class="sub-menu" id="sub-menu-2">
                                    <i class="fas fa-book"></i>Book
                                </a>
                                <ul class="sub-menu-items" id="sub-menu-items-2">
                                    <li class="sidebar-sub-item"> <a href="~/admin/books_table"><i class="fas fa-book"></i>Show Books</a></li>
                                    <li class="sidebar-sub-item"> <a href="~/admin/AddBook"><i class="fas fa-book"></i>Add Book</a></li>

                                </ul>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            <!-- Sidebar End-->
        }

        <!-- Navbar Start-->
        <div id="navbar">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="menu-bt d-flex align-items-center">
                    <!--Navbar Wrapper Menu -->
                    @if (user != null && user.UserType != null && user.UserType.Equals("a"))
                    {
                        <div class="wrapper-menu">
                            <div class="main-circle">
                                <i class="fas fa-bars"></i>
                            </div>
                        </div>

                    }
                    <!--Navbar Title and Logo -->
                    <div class="navbar-logo d-flex justify-content-between">
                        <a href="~/" class="header-logo">
                            <i class="fas fa-book-reader fa-2x"></i>
                            <div class="mt-2 logo-title">
                                <span class="text-primary text-uppercase">Book Store</span>
                            </div>
                        </a>
                    </div>
                </div>
                <!--Search bar-->
                <div id="search-bar" class="search-bar">
                    <div class="searchbox">
                        <input id="searchbox" type="text" class="text search-input" onchange="newLocation()" placeholder="Search Here...">
                        
                    </div>
                    <script>
                        var searchbox = document.getElementById("searchbox");
                        function newLocation() {
                            window.location = "/category/" + searchbox.value;
                        }

                    </script>
                </div>
                <!--Navbar Collapse-->
                <div class="navbar-collapse collapse">
                    <ul class="navbar-nav ml-auto navbar-list">
                        

                        <li class="line-height pt-3">
                            @{
                                if (user != null)
                                {
                                    String name = System.Globalization.CultureInfo.CurrentCulture.TextInfo.ToTitleCase(user.Name);
                                    String surname = System.Globalization.CultureInfo.CurrentCulture.TextInfo.ToTitleCase(user.Surname);
                                    String username = name + " " + surname;
                                    <div class="dropdown show">
                                        <a id="user-profile" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle iq-waves-effect d-flex align-items-center">
                                            <img id="profile-pic" src="~/images/person-icon.png">
                                            <div class="caption">
                                                <h6 class="mb-1 line-height text-dark">
                                                    @username
                                                </h6>
                                            </div>
                                        </a>
                                        <div class="mt-4 p-0 user-profile-dropdown dropdown-menu border-0" aria-labelledby="user-profile">
                                            <div class="card shadow-none m-0">
                                                <div class="card-body p-0">
                                                    <div class="bg-primary p-3">
                                                        <h5 class="mb-0 text-white line-height">Hello @username</h5>
                                                        <span class="text-white font-size-12">Available</span>
                                                    </div>
                                                    <a class="sub-card" href="~/user/@user.Username">
                                                        <div class="media align-items-center">
                                                            <div class="rounded card-icon text-primary">
                                                                <i class="fas fa-address-book"></i>
                                                            </div>
                                                            <div class="media-body ml-3">
                                                                <h6 class="mb-0 ">My Profile</h6>
                                                                <p class="mb-0 font-size-12">View personal profile details.</p>
                                                            </div>
                                                        </div>
                                                    </a>
                                                    <a class="sub-card" href="~/accountsettings">
                                                        <div class="media align-items-center">
                                                            <div class="rounded card-icon text-primary">
                                                                <i class="fas fa-users-cog"></i>
                                                            </div>
                                                            <div class="media-body ml-3">
                                                                <h6 class="mb-0 ">Account settings</h6>
                                                                <p class="mb-0 font-size-12">Manage your account parameters.</p>
                                                            </div>
                                                        </div>
                                                    </a>
                                                    <a class="sub-card" href="~/checkout">
                                                        <div class="media align-items-center">
                                                            <div class="rounded card-icon text-primary">
                                                                <i class="fas fa-shopping-cart"></i>
                                                            </div>
                                                            <div class="media-body ml-3">
                                                                <h6 class="mb-0 ">Shopping Cart</h6>
                                                                <p class="mb-0 font-size-12">Go to your shopping cart.</p>
                                                            </div>
                                                        </div>
                                                    </a>
                                                    <div class="d-inline-block w-100 text-center p-3">
                                                        <a class="btn btn-primary iq-sign-btn" href="~/login/signout" role="button">Sign out<i class="ri-login-box-line ml-2"></i></a>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                }
                                else
                                {
                                    <div class="dropdown show">
                                        <a id="user-profile" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle d-flex align-items-center">
                                            <img id="profile-pic" src="~/images/person-icon.png">
                                            <div class="caption">
                                                <h6 class="mt-2 line-height text-dark">
                                                    Hello, Sign in
                                                    <p class="mb-0 font-size-12">Or Sign up.</p>
                                                </h6>
                                            </div>
                                        </a>
                                        <div class="mt-4 p-0 user-profile-dropdown dropdown-menu border-0" aria-labelledby="user-profile">
                                            <div class="bg-primary p-3">
                                                <h5 class="mb-0 text-white line-height">Hello Visitor</h5>
                                            </div>
                                            <a class="sub-card" href="~/login">
                                                <div class="media align-items-center">
                                                    <div class="rounded card-icon text-primary">
                                                        <i class="fas fa-sign-in-alt"></i>
                                                    </div>
                                                    <div class="media-body ml-3">
                                                        <h6 class="mb-0 ">Sign in</h6>
                                                        <p class="mb-0 font-size-12">If you have an account.Please Sign in.</p>
                                                    </div>
                                                </div>
                                            </a>
                                            <a class="sub-card" href="~/login/register">
                                                <div class="media align-items-center">
                                                    <div class="rounded card-icon text-primary">
                                                        <i class="fas fa-bookmark"></i>
                                                    </div>
                                                    <div class="media-body ml-3">
                                                        <h6 class="mb-0 ">Sign Up</h6>
                                                        <p class="mb-0 font-size-12">Are you new customer?</p>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                }
                            }

                        </li>
                    </ul>
                </div>
            </nav>

        </div>
        <!-- Navbar End-->
        <!--Content Page Start-->
        <div id="content-page" class="content-page">
            <div class="container-fluid">
                <main role="main" class="pb-3">
                    @RenderBody()
                </main>
            </div>
            <!-- Sayfa değişkenlerinin bulunacağı yer.-->
        </div>
        <!--Content Page End-->
    </div>
    <footer class="border-top footer text-muted">
        <div class="container">
            <p class="footer-text">&copy; 2021 - Book Store - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a></p>

        </div>
    </footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="~/slick/slick.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
